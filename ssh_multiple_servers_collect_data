#SSH script to login to multiple servers and execute a command as SUDO
#StrictHostKeyChecking=no doesnt prompt for RSA key authentication YES/NO
#Here we are executing "multipath -l" command
#Save list of serves in "hostname.txt" & define your "USER" & "PASS"
#Run as "./multipath.sh hostname.txt"

#!/bin/bash
USER="username"
PASS="secret"
while read line
do
    ssh -o StrictHostKeyChecking=no "$USER"@"$line" "hostname;echo "$PASS" | sudo -S /sbin/multipath -l;" < /dev/null
done < "$1"
