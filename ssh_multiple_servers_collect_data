#SSH script to login to multiple servers and execute a command as SUDO
#Here we are executing "multipath -l" command
#After saving the file run as "./multipath.sh hostname.txt"
#Save list of serves in "hostname.txt" & define your "USER" & "PASS"
#StrictHostKeyChecking=no doesnt prompt for RSA key authentication YES/NO

#!/bin/bash
USER="username"
PASS="secret"
while read line
do
    ssh -o StrictHostKeyChecking=no $USER@"$line" "hostname;echo "$PASS" | sudo -S /sbin/multipath -l;" < /dev/null
done < "$1"
